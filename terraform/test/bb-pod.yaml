apiVersion: v1
kind: Pod
metadata:
  name: busybox1
  labels:
    app: busybox1
spec:
  containers:
  - image: busybox
    command:
      - sleep
      - "3600"
    imagePullPolicy: IfNotPresent
    name: busybox
    env:
      - name: ELASTIC_SEARCH_PASSWORD
        valueFrom:
          secretKeyRef:
            name: seqr-secrets
            key: seqr_es_password
      - name: LUIGI_CONFIG_PATH
        value: "/luigi_configs/seqr-load-GRCh38.toml"
    volumeMounts:
      - name: ref-blobstore
        mountPath: "/vep_data"
        subPath: "vep/99.0"
      - name: hadoop-creds
        mountPath: /spark_configs/core-site.xml
        subPath: core-site.xml
        readOnly: true
      - name: es-ca-volume
        mountPath: /es-certs
        readOnly: true
  volumes:
    - name: ref-blobstore
      persistentVolumeClaim:
        claimName: reference-volume-claim
    - name: hadoop-creds
      secret:
        secretName: hadoop-creds
        items:
        - key: core-site.xml
          path: core-site.xml
    - name: es-ca-volume
      secret:
        secretName: elasticsearch-master-certs
        items:
        - key: ca.crt
          path: ca.crt
